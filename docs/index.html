<!DOCTYPE html> <html lang="EN"> <head> <meta charset="utf-8"> <title>D2clone Kit</title> <style>html body{margin:0 auto 0 auto;padding:20px;max-width:1024px;font-family:sans-serif;font-size:14pt;overflow-y:scroll;}html body a{text-decoration:none;}html body a[href]{color:#0055AA;}html body a[href]:hover{color:#0088EE;}html body pre{background:#FAFAFA;border:1px solid #DDDDDD;padding:0.75em;overflow-x:auto;}html body pre >code a[href]{color:#223388;}article.project h1,article.project h2,article.project h3,article.project h4,article.project h5,article.project h6{margin:0.2em 0 0.1em 0;text-indent:1em;}article.project >header{text-align:center;}article.project >header img.logo{display:block;margin:auto;max-height:170px;}article.project >header h1{display:inline-block;text-indent:0;font-size:2.5em;}article.project >header .version{vertical-align:bottom;}article.project >header .languages{margin-top:-0.5em;text-transform:capitalize;}article.project >header .description{margin:0;}article.project >header .pages{margin-top:0.5em;font-size:1.2em;text-transform:capitalize;}article.project >header .pages a{display:inline-block;padding:0 0.2em;}article.project >section{margin:1em 0 1em 0;}article.project #index >ul{list-style:none;margin:0;padding:0;}article.project .row label{display:inline-block;min-width:6em;}article.project #system .row{display:flex;}article.project #system #dependencies{display:inline;margin:0;padding:0;}article.project #system #dependencies li{display:inline;padding:0 0.2em;}article.definition{margin:1em 0 0 0;}article.definition >header h1,article.definition >header h2,article.definition >header h3,article.definition >header h4,article.definition >header h5,article.definition >header h6{text-indent:0;display:inline-block;}article.definition >header ul{display:inline-block;list-style:none;margin:0;padding:0;}article.definition >header ul li{display:inline-block;padding:0 0.2em 0 0;}article.definition >header .visibility{display:none;}article.definition >header .visibility,article.definition >header .type{text-transform:lowercase;}article.definition >header .source-link{visibility:hidden;float:right;}article.definition >header .source-link:after{visibility:visible;content:"[SRC]";}article.definition .docstring{margin:0 0 0 1em;}article.definition .docstring pre{font-size:0.8em;white-space:pre-wrap;}.definition.package >header ul.nicknames{display:inline-block;list-style:none;margin:0;padding:0 0 0 1em;}.definition.package >header ul.nicknames li{display:inline;}.definition.package >header ul.nicknames:before{content:"(";}.definition.package >header ul.nicknames:after{content:")";}.definition.package ul.definitions{margin:0;list-style:none;padding:0 0 0 0.5em;}.definition.callable >header .name:before,.definition.type >header .name:before{content:"(";font-weight:normal;}.definition.callable >header .arguments:after,.definition.type >header .arguments:after{content:")";}.definition.callable >header .arguments .arguments:before,.definition.type >header .arguments .arguments:before{content:"(";}.definition.callable >header .arguments .argument,.definition.type >header .arguments .argument{padding:0;}.definition.callable >header .arguments .argument.lambda-list-keyword,.definition.type >header .arguments .argument.lambda-list-keyword{color:#991155;}.definition li>mark{background:none;border-left:0.3em solid #0088EE;padding-left:0.3em;display:block;}</style> </head> <body> <article class="project"> <header>  <img class="logo" src="d2clone.png" alt="Logo">  <h1>d2clone kit</h1>  <span class="version"></span>  <nav class="languages">    </nav>  <p class="description">Generic Diablo 2 clone game engine.</p>  <nav class="pages">    </nav> </header> <section id="documentation"><p>Diablo 2 is arguably one of the best action RPG created ever. This is humble attempt to recreate and, hopefully, deconstruct it using Common Lisp programming language and related techniques.</p> <h2>Glossary</h2> <ul> <li><strong>map coordinates</strong> - <em>world coordinates</em> of tile in staggered map grid.</li> <li><strong>prefab</strong> - system-specific object loaded from file and used as a template to create new instances of system's component.</li> <li><strong>viewport coordinates</strong> - screen pixel coordinates relative to the current camera position.</li> <li><strong>world coordinates</strong> - floating point in-game world coordinates. One unit of length corresponds to one map tile width, typically 64 pixels.</li> </ul> <h2>Legal</h2> <p>d2clone-kit is licensed under the GNU GPL license version 3. See LICENSE.</p> <p>Diablo® II - Copyright © 2000 Blizzard Entertainment, Inc. All rights reserved. Diablo and Blizzard Entertainment are trademarks or registered trademarks of Blizzard Entertainment, Inc. in the U.S. and/or other countries.</p> <p>d2clone-kit and any of its maintainers are in no way associated with or endorsed by Blizzard Entertainment®.</p> </section>   <section id="system"> <h2>System Information</h2>   <div class="row"> <label for="dependencies">Dependencies:</label> <ul id="dependencies"><li><a class="external">asdf-shared-library</a></li><li><a class="external" href="https://Shinmera.github.io/deploy/">deploy</a></li><li><a class="external">iterate</a></li><li><a class="external">make-hash</a></li><li><a class="external">trivial-gray-streams</a></li><li><a class="external">alexandria</a></li><li><a class="external">trivial-garbage</a></li><li><a class="external">cl-containers</a></li><li><a class="external">parse-float</a></li><li><a class="external" href="https://github.com/Shinmera/float-features">float-features</a></li><li><a class="external">babel</a></li><li><a class="external">cl-inflector</a></li><li><a class="external">qbase64</a></li><li><a class="external">chipz</a></li><li><a class="external">uiop</a></li><li><a class="external">xmls</a></li><li><a class="external">cl-csv</a></li><li><a class="external">cl-liballegro</a></li><li><a class="external">livesupport</a></li></ul> </div>   <div class="row"> <label for="author">Author:</label> <a id="author" href="mailto:awkravchuk@gmail.com">Andrew Kravchuk</a> </div>   <div class="row"> <label for="license">License:</label> <a id="license" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/LICENSE">GPL v3</a> </div>   </section>   <section id="index"> <h2>Definition Index</h2> <ul> <li> <article class="definition package" id="PACKAGE D2CLONE-KIT"> <header> <h3> <a href="#PACKAGE%20D2CLONE-KIT">D2CLONE-KIT</a> </h3> <ul class="nicknames"> <li>D2C</li> </ul>  </header> <div class="docstring"><p>Generic Diablo 2 clone game engine.</p> </div> <ul class="definitions"> <li> <article class="definition class" id="CLASS D2CLONE-KIT:BINARY-STREAM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20D2CLONE-KIT%3ABINARY-STREAM">BINARY-STREAM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/fs.lisp#91:5">Source</a>  </header> <div class="docstring"><p>Wrapper around liballegro <a href="https://liballeg.org/a5docs/trunk/file.html">file APIs</a>.</p> </div> </article> </li>  <li> <article class="definition class" id="CLASS D2CLONE-KIT:CAMERA-SYSTEM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20D2CLONE-KIT%3ACAMERA-SYSTEM">CAMERA-SYSTEM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/camera-system.lisp#4:0">Source</a>  </header> <div class="docstring"><p>Handles camera entity.</p> </div> </article> </li>  <li> <article class="definition class" id="CLASS D2CLONE-KIT:CHARACTER-STREAM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20D2CLONE-KIT%3ACHARACTER-STREAM">CHARACTER-STREAM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/fs.lisp#59:5">Source</a>  </header> <div class="docstring"><p>Wrapper around liballegro <a href="https://liballeg.org/a5docs/trunk/file.html">file APIs</a>.</p> </div> </article> </li>  <li> <article class="definition class" id="CLASS D2CLONE-KIT:CHARACTER-SYSTEM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20D2CLONE-KIT%3ACHARACTER-SYSTEM">CHARACTER-SYSTEM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/character-system.lisp#4:0">Source</a>  </header> <div class="docstring"><p>Handles characters.</p> </div> </article> </li>  <li> <article class="definition class" id="CLASS D2CLONE-KIT:COORDINATE-SYSTEM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20D2CLONE-KIT%3ACOORDINATE-SYSTEM">COORDINATE-SYSTEM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/coordinate-system.lisp#4:0">Source</a>  </header> <div class="docstring"><p>Stores world coordinates.</p> </div> </article> </li>  <li> <article class="definition class" id="CLASS D2CLONE-KIT:DEBUG-SYSTEM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20D2CLONE-KIT%3ADEBUG-SYSTEM">DEBUG-SYSTEM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/debug-system.lisp#3:0">Source</a>  </header> <div class="docstring"><p>Handles drawing of debug lines.</p> </div> </article> </li>  <li> <article class="definition class" id="CLASS D2CLONE-KIT:MAP-SYSTEM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20D2CLONE-KIT%3AMAP-SYSTEM">MAP-SYSTEM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/map-system.lisp#3:0">Source</a>  </header> <div class="docstring"><p>Handles map chunks in Tiled format.</p> </div> </article> </li>  <li> <article class="definition class" id="CLASS D2CLONE-KIT:PLAYER-SYSTEM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20D2CLONE-KIT%3APLAYER-SYSTEM">PLAYER-SYSTEM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/player-system.lisp#4:0">Source</a>  </header> <div class="docstring"><p>Handles player character.</p> </div> </article> </li>  <li> <article class="definition class" id="CLASS D2CLONE-KIT:SPRITE-BATCH-SYSTEM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20D2CLONE-KIT%3ASPRITE-BATCH-SYSTEM">SPRITE-BATCH-SYSTEM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/sprite-batch-system.lisp#4:0">Source</a>  </header> <div class="docstring"><p>Handles ordered sprite batches.</p> </div> </article> </li>  <li> <article class="definition class" id="CLASS D2CLONE-KIT:SPRITE-SYSTEM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20D2CLONE-KIT%3ASPRITE-SYSTEM">SPRITE-SYSTEM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/sprite-system.lisp#4:0">Source</a>  </header> <div class="docstring"><p>Handles movable sprites in Aseprite format.</p> </div> </article> </li>  <li> <article class="definition class" id="CLASS D2CLONE-KIT:SYSTEM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20D2CLONE-KIT%3ASYSTEM">SYSTEM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#3:0">Source</a>  </header> <div class="docstring"><p>Base class for all ECS systems.</p> </div> </article> </li>  <li> <article class="definition class" id="CLASS D2CLONE-KIT:VIRTUAL-BINARY-STREAM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20D2CLONE-KIT%3AVIRTUAL-BINARY-STREAM">VIRTUAL-BINARY-STREAM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/fs.lisp#121:5">Source</a>  </header> <div class="docstring"><p>Read-only binary Gray stream based on SIMPLE-ARRAY of UNSIGNED-BYTE.</p> </div> </article> </li>  <li> <article class="definition type-definition" id="TYPE D2CLONE-KIT:ANGLE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">TYPE-DEFINITION</span> <h4 class="name"> <a href="#TYPE%20D2CLONE-KIT%3AANGLE">ANGLE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  </header> <div class="docstring"><p>Angle value in radians.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:ABSOLUTE-&gt;VIEWPORT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AABSOLUTE-%3EVIEWPORT">ABSOLUTE-&gt;VIEWPORT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">X</li>    <li class="argument">Y</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/camera-system.lisp#47:0">Source</a>  </header> <div class="docstring"><p>Converts given integer absolute screen coordinates to viewport coordinates.</p> <p>See <a href="#FUNCTION%20D2CLONE-KIT%3AVIEWPORT-%3EABSOLUTE" class="xref">VIEWPORT-&gt;ABSOLUTE</a><br></p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:ADD-DEBUG-POINT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AADD-DEBUG-POINT">ADD-DEBUG-POINT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ENTITY</li>    <li class="argument">X</li>    <li class="argument">Y</li>    <li class="argument">R</li>    <li class="argument">G</li>    <li class="argument">B</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">A</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/debug-system.lisp#17:0">Source</a>  </header> <div class="docstring"><p>Adds point with screen coordinates X, Y and color R, G, B, A to debug buffer ENTITY.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:ADD-DEBUG-RECTANGLE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AADD-DEBUG-RECTANGLE">ADD-DEBUG-RECTANGLE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ENTITY</li>    <li class="argument">X</li>    <li class="argument">Y</li>    <li class="argument">W</li>    <li class="argument">H</li>    <li class="argument">COLOR</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/debug-system.lisp#37:0">Source</a>  </header> <div class="docstring"><p>Adds rectangle with screen coordinates X, Y, dimensions W, H and color COLOR to debug buffer ENTITY.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:ADD-DEBUG-TILE-RHOMB"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AADD-DEBUG-TILE-RHOMB">ADD-DEBUG-TILE-RHOMB</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ENTITY</li>    <li class="argument">X</li>    <li class="argument">Y</li>    <li class="argument">COLOR</li>    <li class="argument">MARK</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/debug-system.lisp#53:0">Source</a>  </header> <div class="docstring"><p>Adds grid rhomb with screen coordinates X, Y and color COLOR to debug buffer ENTITY. If MARK is T, then rhomb is drawn crossed out.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:ADD-SPRITE-INDEX-TO-BATCH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AADD-SPRITE-INDEX-TO-BATCH">ADD-SPRITE-INDEX-TO-BATCH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ENTITY</li>    <li class="argument">ORDER</li>    <li class="argument">INDEX</li>    <li class="argument">SCREEN-X</li>    <li class="argument">SCREEN-Y</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/sprite-batch-system.lisp#70:0">Source</a>  </header> <div class="docstring"><p>Adds sprite to sprite batch ENTITY using order ORDER, sprite index INDEX and
screen coordinates SCREEN-X, SCREEN-Y.</p> <p>See <a href="#FUNCTION%20D2CLONE-KIT%3AADD-SPRITE-TO-BATCH" class="xref">ADD-SPRITE-TO-BATCH</a><br></p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:ADD-SPRITE-TO-BATCH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AADD-SPRITE-TO-BATCH">ADD-SPRITE-TO-BATCH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ENTITY</li>    <li class="argument">ORDER</li>    <li class="argument">IMAGE-X</li>    <li class="argument">IMAGE-Y</li>    <li class="argument">SCREEN-X</li>    <li class="argument">SCREEN-Y</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/sprite-batch-system.lisp#49:0">Source</a>  </header> <div class="docstring"><p>Adds sprite to sprite batch ENTITY using order ORDER, sprite coordinates
IMAGE-X, IMAGE-Y and screen coordinates SCREEN-X, SCREEN-Y.</p> <p>See <a href="#FUNCTION%20D2CLONE-KIT%3AADD-SPRITE-INDEX-TO-BATCH" class="xref">ADD-SPRITE-INDEX-TO-BATCH</a><br></p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:CAMERA-ENTITY"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ACAMERA-ENTITY">CAMERA-ENTITY</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/camera-system.lisp#22:0">Source</a>  </header> <div class="docstring"><p>Returns current camera entity.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:CAMERA-TARGET"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ACAMERA-TARGET">CAMERA-TARGET</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/camera-system.lisp#27:0">Source</a>  </header> <div class="docstring"><p>Returns current camera target, i.e. the entity camera tracks.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:(SETF CAMERA-TARGET)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3A%28SETF%20CAMERA-TARGET%29">(SETF CAMERA-TARGET)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TARGET</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/camera-system.lisp#32:0">Source</a>  </header> <div class="docstring"><p>Sets current camera target, i.e. the entity camera tracks. Set to NIL to stop camera tracking.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:DELETE-ENTITY"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ADELETE-ENTITY">DELETE-ENTITY</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ENTITY</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#118:0">Source</a>  </header> <div class="docstring"><p>Deletes entity ENTITY.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:DEMO"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ADEMO">DEMO</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/d2clone-kit.lisp#147:29">Source</a>  </header> <div class="docstring"><p>Runs built-in engine demo.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:DO-DRAW"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ADO-DRAW">DO-DRAW</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">RENDERER</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/renderer.lisp#14:0">Source</a>  </header> <div class="docstring"><p>Calls renderer functions scheduled within renderer instance RENDERER in accordance with their respective Z order values.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:GAME-LOOP"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AGAME-LOOP">GAME-LOOP</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">EVENT-QUEUE</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">REPL-UPDATE-INTERVAL</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/d2clone-kit.lisp#11:0">Source</a>  </header> <div class="docstring"><p>Runs game loop.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:GROUND-LAYER-P"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AGROUND-LAYER-P">GROUND-LAYER-P</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">LAYER</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/map-system.lisp#153:0">Source</a>  </header> <div class="docstring"><p>Returns T if map chunk layer LAYER is ground layer (i.e. has &quot;ground?&quot; property).</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:HANDLE-EVENT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AHANDLE-EVENT">HANDLE-EVENT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">EVENT</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/d2clone-kit.lisp#3:0">Source</a>  </header> <div class="docstring"><p>Broadcasts liballegro event EVENT through ECS systems.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:LOG-DEBUG"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ALOG-DEBUG">LOG-DEBUG</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">MESSAGE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">ARGS</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/log.lisp#56:0">Source</a>  </header> <div class="docstring"><p>Adds formatted message MESSAGE using placeholder arguments ARGS to liballegro debug channel.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:LOG-ERROR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ALOG-ERROR">LOG-ERROR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">MESSAGE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">ARGS</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/log.lisp#65:0">Source</a>  </header> <div class="docstring"><p>Adds formatted message MESSAGE using placeholder arguments ARGS to liballegro error channel.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:LOG-INFO"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ALOG-INFO">LOG-INFO</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">MESSAGE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">ARGS</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/log.lisp#59:0">Source</a>  </header> <div class="docstring"><p>Adds formatted message MESSAGE using placeholder arguments ARGS to liballegro info channel.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:LOG-WARN"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ALOG-WARN">LOG-WARN</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">MESSAGE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">ARGS</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/log.lisp#62:0">Source</a>  </header> <div class="docstring"><p>Adds formatted message MESSAGE using placeholder arguments ARGS to liballegro warn channel.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:MAKE-ENTITY"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AMAKE-ENTITY">MAKE-ENTITY</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#105:0">Source</a>  </header> <div class="docstring"><p>Allocates new entity.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:MAKE-PRIORITY-QUEUE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AMAKE-PRIORITY-QUEUE">MAKE-PRIORITY-QUEUE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">KEY-FN</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/priority-queue.lisp#11:0">Source</a>  </header> <div class="docstring"><p>Creates priority queue using key extraction function KEY-FN.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:MAKE-RENDERER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AMAKE-RENDERER">MAKE-RENDERER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/renderer.lisp#3:0">Source</a>  </header> <div class="docstring"><p>Creates functional renderer instance.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:MAP-&gt;SCREEN"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AMAP-%3ESCREEN">MAP-&gt;SCREEN</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">X</li>    <li class="argument">Y</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/map-system.lisp#27:0">Source</a>  </header> <div class="docstring"><p>Converts map coordinates to screen pixel coordinates.</p> <p>See <a href="#FUNCTION%20D2CLONE-KIT%3ASCREEN-%3EMAP" class="xref">SCREEN-&gt;MAP</a><br> See <a href="#FUNCTION%20D2CLONE-KIT%3ASCREEN-%3EMAP%2A" class="xref">SCREEN-&gt;MAP*</a><br></p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:MOUSE-POSITION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AMOUSE-POSITION">MOUSE-POSITION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">EVENT</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/player-system.lisp#30:0">Source</a>  </header> <div class="docstring"><p>Get current mouse cursor coordinates using liballegro mouse event EVENT or by calling <a href="https://liballeg.org/a5docs/trunk/mouse.html#al_get_mouse_state">al_get_mouse_state</a>.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:PLAYER-ENTITY"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3APLAYER-ENTITY">PLAYER-ENTITY</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/player-system.lisp#23:0">Source</a>  </header> <div class="docstring"><p>Returns current player entity.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:PRIORITY-QUEUE-PUSH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3APRIORITY-QUEUE-PUSH">PRIORITY-QUEUE-PUSH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">QUEUE</li>    <li class="argument">ELEMENT</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/priority-queue.lisp#38:0">Source</a>  </header> <div class="docstring"><p>Adds element ELEMENT to priority queue QUEUE.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:PRIORITY-QUEUE-PUSH-MANY"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3APRIORITY-QUEUE-PUSH-MANY">PRIORITY-QUEUE-PUSH-MANY</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">QUEUE</li>    <li class="argument">ELEMENTS</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/priority-queue.lisp#58:0">Source</a>  </header> <div class="docstring"><p>Adds elements from vector ELEMENTS to priority queue QUEUE.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:PRIORITY-QUEUE-TRAVERSE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3APRIORITY-QUEUE-TRAVERSE">PRIORITY-QUEUE-TRAVERSE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">QUEUE</li>    <li class="argument">FN</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/priority-queue.lisp#81:0">Source</a>  </header> <div class="docstring"><p>Calls one argument function FN on elements of priority queue QUEUE
in appropriate order.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:RANGE-VISIBLE-P"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ARANGE-VISIBLE-P">RANGE-VISIBLE-P</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">X</li>    <li class="argument">Y</li>    <li class="argument">WIDTH</li>    <li class="argument">HEIGHT</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/camera-system.lisp#87:0">Source</a>  </header> <div class="docstring"><p>Returns T if any part of rectangular range defined by given viewport coordinates and dimensions is visible on screen.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:RENDER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ARENDER">RENDER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">RENDERER</li>    <li class="argument">Z-ORDER</li>    <li class="argument">RENDER-PROC</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/renderer.lisp#10:0">Source</a>  </header> <div class="docstring"><p>Schedules function RENDER-PROC to be called in accordance with specified Z order Z-ORDER within renderer instance RENDERER.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:SCREEN-&gt;MAP"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ASCREEN-%3EMAP">SCREEN-&gt;MAP</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">X</li>    <li class="argument">Y</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/map-system.lisp#39:0">Source</a>  </header> <div class="docstring"><p>Converts screen pixel coordinates to map coordinates of nearest tile.</p> <p>See <a href="#FUNCTION%20D2CLONE-KIT%3ASCREEN-%3EMAP%2A" class="xref">SCREEN-&gt;MAP*</a><br> See <a href="#FUNCTION%20D2CLONE-KIT%3AMAP-%3ESCREEN" class="xref">MAP-&gt;SCREEN</a><br></p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:SCREEN-&gt;MAP*"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ASCREEN-%3EMAP%2A">SCREEN-&gt;MAP*</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">X</li>    <li class="argument">Y</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/map-system.lisp#53:0">Source</a>  </header> <div class="docstring"><p>Converts screen pixel coordinates to exact map coordinates.</p> <p>See <a href="#FUNCTION%20D2CLONE-KIT%3ASCREEN-%3EMAP" class="xref">SCREEN-&gt;MAP</a><br> See <a href="#FUNCTION%20D2CLONE-KIT%3AMAP-%3ESCREEN" class="xref">MAP-&gt;SCREEN</a><br></p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:SPRITE-DIRECTION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ASPRITE-DIRECTION">SPRITE-DIRECTION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">DIRECTIONS</li>    <li class="argument">ANGLE</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/sprite-system.lisp#247:29">Source</a>  </header> <div class="docstring"><p>Calculates sprite direction from angle value ANGLE assuming total sprite direction count DIRECTIONS. East direction is 0 degree angle; counted clockwise.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:START-ENGINE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ASTART-ENGINE">START-ENGINE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">GAME-NAME</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/d2clone-kit.lisp#83:11">Source</a>  </header> <div class="docstring"><p>Initializes and starts engine using assets specified by GAME-NAME.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:SWITCH-STANCE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ASWITCH-STANCE">SWITCH-STANCE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ENTITY</li>    <li class="argument">NEW-STANCE</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/sprite-system.lisp#220:29">Source</a>  </header> <div class="docstring"><p>Immediately switches stance of the sprite ENTITY to NEW-STANCE.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:SYSTEM-REF"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ASYSTEM-REF">SYSTEM-REF</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NAME</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#75:0">Source</a>  </header> <div class="docstring"><p>Returns system instance by its name symbol NAME.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:TARGET-PLAYER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ATARGET-PLAYER">TARGET-PLAYER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">MOUSE-EVENT</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/player-system.lisp#41:0">Source</a>  </header> <div class="docstring"><p>Set new player character target according to MOUSE-EVENT or current mouse cursor position.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:TOGGLE-LAYER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3ATOGGLE-LAYER">TOGGLE-LAYER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ENTITY</li>    <li class="argument">LAYER</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ON</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/sprite-system.lisp#34:0">Source</a>  </header> <div class="docstring"><p>Toggles layer LAYER on sprite entity ENTITY.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:VIEWPORT-&gt;ABSOLUTE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AVIEWPORT-%3EABSOLUTE">VIEWPORT-&gt;ABSOLUTE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">X</li>    <li class="argument">Y</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/camera-system.lisp#61:0">Source</a>  </header> <div class="docstring"><p>Converts given integer viewport coordinates to absolute screen coordinates.</p> <p>See <a href="#FUNCTION%20D2CLONE-KIT%3AABSOLUTE-%3EVIEWPORT" class="xref">ABSOLUTE-&gt;VIEWPORT</a><br></p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:VISIBLEP"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AVISIBLEP">VISIBLEP</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">X</li>    <li class="argument">Y</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">DELTA</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/camera-system.lisp#75:0">Source</a>  </header> <div class="docstring"><p>Returns T if point with given viewport coordinates is visible on screeen.</p> </div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION D2CLONE-KIT:WORLD-&gt;SCREEN"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20D2CLONE-KIT%3AWORLD-%3ESCREEN">WORLD-&gt;SCREEN</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">X</li>    <li class="argument">Y</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/coordinate-system.lisp#25:18">Source</a>  </header> <div class="docstring"><p>Converts world coordinate units to screen pixel units.</p> </div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION D2CLONE-KIT:MAKE-COMPONENT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20D2CLONE-KIT%3AMAKE-COMPONENT">MAKE-COMPONENT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SYSTEM</li>    <li class="argument">ENTITY</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">PARAMETERS</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#94:0">Source</a>  </header> <div class="docstring"><p>Creates new component using PARAMETERS within system SYSTEM for entity ENTITY.</p> <p>PARAMETERS could include <code>:PREFAB</code> key, in which case component is constructed using corresponding prefab.</p> <p>See <a href="#GENERIC-FUNCTION%20D2CLONE-KIT%3AMAKE-PREFAB-COMPONENT" class="xref">MAKE-PREFAB-COMPONENT</a><br></p> </div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION D2CLONE-KIT:MAKE-PREFAB"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20D2CLONE-KIT%3AMAKE-PREFAB">MAKE-PREFAB</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SYSTEM</li>    <li class="argument">PREFAB-NAME</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#211:0">Source</a>  </header> <div class="docstring"><p>Loads prefab with name symbol PREFAB-NAME within system SYSTEM.</p> </div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION D2CLONE-KIT:MAKE-PREFAB-COMPONENT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20D2CLONE-KIT%3AMAKE-PREFAB-COMPONENT">MAKE-PREFAB-COMPONENT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SYSTEM</li>    <li class="argument">ENTITY</li>    <li class="argument">PREFAB</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#217:0">Source</a>  </header> <div class="docstring"><p>Creates new component using prefab instance PREFAB as a template within system SYSTEM for entity ENTITY.</p> </div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION D2CLONE-KIT:PREFAB"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20D2CLONE-KIT%3APREFAB">PREFAB</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SYSTEM</li>    <li class="argument">PREFAB-NAME</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#203:0">Source</a>  </header> <div class="docstring"><p>Returns prefab with name symbol PREFAB-NAME within system SYSTEM.</p> </div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION D2CLONE-KIT:(SETF PREFAB)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20D2CLONE-KIT%3A%28SETF%20PREFAB%29">(SETF PREFAB)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-PREFAB</li>    <li class="argument">SYSTEM</li>    <li class="argument">PREFAB-NAME</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#206:0">Source</a>  </header> <div class="docstring"><p>Sets prefab NEW-PREFAB with name symbol PREFAB-NAME within system SYSTEM.</p> </div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION D2CLONE-KIT:PREFAB-PATH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20D2CLONE-KIT%3APREFAB-PATH">PREFAB-PATH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SYSTEM</li>    <li class="argument">PREFAB-NAME</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#209:0">Source</a>  </header> <div class="docstring"><p>Returns prefab file path for system SYSTEM and prefab name symbol PREFAB-NAME.</p> </div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION D2CLONE-KIT:READ-BINARY"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20D2CLONE-KIT%3AREAD-BINARY">READ-BINARY</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TYPE</li>    <li class="argument">STREAM</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/fs.lisp#143:5">Source</a>  </header> <div class="docstring"><p>Reads and returns element of type denoted by TYPE from binary stream STREAM.</p> </div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION D2CLONE-KIT:SYSTEM-DRAW"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20D2CLONE-KIT%3ASYSTEM-DRAW">SYSTEM-DRAW</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SYSTEM</li>    <li class="argument">RENDERER</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#24:0">Source</a>  </header> <div class="docstring"><p>Renders system SYSTEM using functional renderer RENDERER.</p> <p>See <a href="#FUNCTION%20D2CLONE-KIT%3ARENDER" class="xref">RENDER</a><br></p> </div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION D2CLONE-KIT:SYSTEM-EVENT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20D2CLONE-KIT%3ASYSTEM-EVENT">SYSTEM-EVENT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SYSTEM</li>    <li class="argument">EVENT-TYPE</li>    <li class="argument">EVENT</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#18:0">Source</a>  </header> <div class="docstring"><p>Processes liballegro event EVENT of type EVENT-TYPE by system SYSTEM.</p> </div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION D2CLONE-KIT:SYSTEM-QUIT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20D2CLONE-KIT%3ASYSTEM-QUIT">SYSTEM-QUIT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SYSTEM</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#29:0">Source</a>  </header> <div class="docstring"><p>Shuts down system SYSTEM.</p> </div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION D2CLONE-KIT:SYSTEM-UPDATE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20D2CLONE-KIT%3ASYSTEM-UPDATE">SYSTEM-UPDATE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SYSTEM</li>    <li class="argument">DT</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#21:0">Source</a>  </header> <div class="docstring"><p>Updates system SYSTEM for time step DT (usually fixed by liballegro around 1/60 of second).</p> </div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION D2CLONE-KIT:DEFCOMPONENT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20D2CLONE-KIT%3ADEFCOMPONENT">DEFCOMPONENT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SYSTEM</li>    <li class="argument">NAME</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">SLOTS</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#124:0">Source</a>  </header> <div class="docstring"><p>Defines component structure with name NAME and slots SLOTS within system SYSTEM.</p> </div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION D2CLONE-KIT:DEFINE-BINARY-STRUCT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20D2CLONE-KIT%3ADEFINE-BINARY-STRUCT">DEFINE-BINARY-STRUCT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NAME</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">SLOTS</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/fs.lisp#168:5">Source</a>  </header> <div class="docstring"><p>Defines structure with name NAME and slots SLOTS along with corresponding READ-BINARY method which reads and returns that structure from given binary stream.</p> <p>See <a href="#GENERIC-FUNCTION%20D2CLONE-KIT%3AREAD-BINARY" class="xref">READ-BINARY</a><br></p> </div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION D2CLONE-KIT:DEFOPTIONS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20D2CLONE-KIT%3ADEFOPTIONS">DEFOPTIONS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NAME</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">OPTIONS</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/config.lisp#37:0">Source</a>  </header> <div class="docstring"><p>Defines macro to access given group of options. E.g. when NAME is 'SYSTEM, it defines WITH-SYSTEM-CONFIG-OPTIONS macro. OPTIONS should be list of lists containing option's section name, option's name, and :TYPE and :DEFAULT properties.</p> <p>See <a href="#MACRO-FUNCTION%20D2CLONE-KIT%3AWITH-SYSTEM-CONFIG-OPTIONS" class="xref">WITH-SYSTEM-CONFIG-OPTIONS</a><br></p> </div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION D2CLONE-KIT:DEFPREFAB"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20D2CLONE-KIT%3ADEFPREFAB">DEFPREFAB</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SYSTEM</li>    <li class="argument">EXTENSION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">SLOTS</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#229:0">Source</a>  </header> <div class="docstring"><p>Defines prefab structure with slots SLOTS and file name extension EXTENSION within system SYSTEM.</p> </div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION D2CLONE-KIT:DEFUNL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20D2CLONE-KIT%3ADEFUNL">DEFUNL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">FNAME</li>    <li class="argument">LAMBDA-LIST</li>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/log.lisp#20:0">Source</a>  </header> <div class="docstring"><p>DEFUN wrapper which sets correct current function name for logging functions.</p> </div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION D2CLONE-KIT:WITH-CAMERA"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20D2CLONE-KIT%3AWITH-CAMERA">WITH-CAMERA</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">BINDINGS</li>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/camera-system.lisp#36:0">Source</a>  </header> <div class="docstring"><p>Executes BODY with current camera position bound to two symbols in BIDNINGS list.</p> </div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION D2CLONE-KIT:WITH-CONDITION-REPORTER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20D2CLONE-KIT%3AWITH-CONDITION-REPORTER">WITH-CONDITION-REPORTER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/log.lisp#68:0">Source</a>  </header> <div class="docstring"><p>Executes body BODY with generic error handler which puts full error condition info including backtrace to liballegro log and displays error messagebox when not in debugger.</p> </div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION D2CLONE-KIT:WITH-SCREEN-COORDINATE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20D2CLONE-KIT%3AWITH-SCREEN-COORDINATE">WITH-SCREEN-COORDINATE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ENTITY</li>    <li class="argument">BINDINGS</li>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/coordinate-system.lisp#31:18">Source</a>  </header> <div class="docstring"><p>Executes BODY with ENTITY's screen pixel coordinates bound to two symbols in BINDINGS list. If BINDINGS are not set, coordinates are bound to symbols X and Y.</p> </div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION D2CLONE-KIT:WITH-SYSTEM-CONFIG-OPTIONS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20D2CLONE-KIT%3AWITH-SYSTEM-CONFIG-OPTIONS">WITH-SYSTEM-CONFIG-OPTIONS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <ul class="arguments"> <li class="argument">OPTIONS</li>  <li class="argument lambda-list-keyword">&amp;KEY</li>  <li class="argument">READ-ONLY</li> </ul>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/config.lisp#62:0">Source</a>  </header> <div class="docstring"><p>Executes BODY with bindings for config options OPTIONS. If READ-ONLY is T (the default), options are not SETF-able.</p> </div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION D2CLONE-KIT:WITH-SYSTEMS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20D2CLONE-KIT%3AWITH-SYSTEMS">WITH-SYSTEMS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VAR</li>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>  </ul>  <a class="source-link" href="file:///home/lock/Progs/GAMEDEV/d2clone-kit/src/systems.lisp#79:0">Source</a>  </header> <div class="docstring"><p>Executes BODY in loop for each system, binding system instance to variable VAR.</p> </div> </article> </li> </ul> </article> </li> </ul> </section> </article> <script>window.addEventListener("DOMContentLoaded", function(){
    var unmarkElement = function(el){
        if(el.tagName === "mark" || el.tagName === "MARK"){
            [].forEach.call(el.childNodes, function(child){
                el.parentNode.insertBefore(child, el);
            });
            el.parentNode.removeChild(el);
        }else if(el.parentNode.tagName === "mark"){
            return unmarkElement(el.parentNode);
        }
        return null;
    }

    var unmarkAll = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("mark"), unmarkElement);
    }
    
    var markElement = function(el){
        if(el.parentNode.tagName === "mark" || el.parentNode.tagName === "MARK"){
            return el.parentNode;
        } else {
            unmarkAll();
            var marked = document.createElement("mark");
            el.parentNode.insertBefore(marked, el);
            marked.appendChild(el);
            return marked;
        }
    }

    var markFragmented = function(){
        if(window.location.hash){
            var el = document.getElementById(decodeURIComponent(window.location.hash.substr(1)));
            if(el) markElement(el);
        }
    }

    var registerXrefLink = function(link){
        var el = document.getElementById(decodeURIComponent(link.getAttribute("href").substr(1)));
        if(el){
            link.addEventListener("click", function(){
                markElement(el);
            });
        }
    }

    var registerXrefLinks = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("a.xref"), registerXrefLink);
    }

    markFragmented();
    registerXrefLinks();
}); </script> </body> </html> 